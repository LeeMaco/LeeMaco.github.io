<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>書籍管理系統</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>書籍管理系統</h1>
        <button id="adminLoginBtn">管理員登入</button>
    </header>

    <main>
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="搜索書名、作者、ISBN...">
            <select id="categoryFilter">
                <option value="all">所有類別</option>
                <!-- 類別選項將由 JavaScript 動態生成 -->
            </select>
        </div>

        <div class="book-list-container">
            <h2>書籍列表</h2>
            <div id="bookList" class="book-list">
                <!-- 書籍卡片將由 JavaScript 動態生成 -->
            </div>
        </div>

        <div id="adminControls" class="admin-controls" style="display:none;">
            <h2>管理員控制台</h2>
            <button id="addBookBtn">新增書籍</button>
            <button id="exportJsonBtn">導出 JSON</button>
            <button id="exportExcelBtn">導出 Excel</button>
            <input type="file" id="importFile" accept=".json, .xlsx">
            <button id="importBtn">導入數據</button>
            <button id="backupGithubBtn">備份到 GitHub</button>
        </div>
    </main>

    <!-- 新增/編輯書籍彈窗 -->
    <div id="bookModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3 id="modalTitle">新增書籍</h3>
            <form id="bookForm">
                <input type="hidden" id="bookId">
                <div>
                    <label for="title">書名:</label>
                    <input type="text" id="title" required>
                </div>
                <div>
                    <label for="author">作者:</label>
                    <input type="text" id="author" required>
                </div>
                <div>
                    <label for="isbn">ISBN:</label>
                    <input type="text" id="isbn" required>
                </div>
                <div>
                    <label for="category">類別:</label>
                    <input type="text" id="category" required>
                </div>
                <div>
                    <label for="location">位置:</label>
                    <input type="text" id="location">
                </div>
                <div>
                    <label for="description">描述:</label>
                    <textarea id="description"></textarea>
                </div>
                <button type="submit" id="saveBookBtn">保存</button>
            </form>
        </div>
    </div>

    <!-- 管理員登入彈窗 -->
    <div id="adminLoginModal" class="modal">
        <div class="modal-content">
            <span class="close-login-btn">&times;</span>
            <h3>管理員登入</h3>
            <form id="adminLoginForm">
                <div>
                    <label for="username">用戶名:</label>
                    <input type="text" id="username" value="admin" required>
                </div>
                <div>
                    <label for="password">密碼:</label>
                    <input type="password" id="password" value="admin123" required>
                </div>
                <button type="submit">登入</button>
            </form>
        </div>
    </div>

    <footer>
        <p>&copy; 2024 書籍管理系統</p>
    </footer>

    <!-- GitHub 備份彈窗 -->
    <div id="githubBackupModal" class="modal">
        <div class="modal-content">
            <span class="close-github-backup-btn">&times;</span>
            <h3>備份到 GitHub</h3>
            <form id="githubBackupForm">
                <div>
                    <label for="githubToken">GitHub 個人訪問令牌:</label>
                    <input type="password" id="githubToken" required>
                    <small>需要 `repo` 權限的令牌。</small>
                </div>
                <div>
                    <label for="githubOwner">倉庫所有者 (用戶名或組織名):</label>
                    <input type="text" id="githubOwner" required>
                </div>
                <div>
                    <label for="githubRepo">倉庫名稱:</label>
                    <input type="text" id="githubRepo" required>
                </div>
                <div>
                    <label for="githubBranch">分支 (可選, 默認 main):</label>
                    <input type="text" id="githubBranch" placeholder="main">
                </div>
                <div>
                    <label for="githubFilePath">文件路徑 (可選, 默認 books_backup.json):</label>
                    <input type="text" id="githubFilePath" placeholder="books_backup.json">
                </div>
                <button type="submit" id="confirmGithubBackupBtn">確認備份</button>
            </form>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
    <script src="script.js"></script>
</body>
</html>